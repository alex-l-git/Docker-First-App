# üê≥ Docker: First App
–°—Ä–µ–¥–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.


## 1. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
–í –¥–∞–Ω–Ω–æ–π —Å–±–æ—Ä–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 2 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
* `docker` - —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è)
* `docker-compose` - –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–∂–¥—É —Å–æ–±–æ–π –≤ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö


## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
**–°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:**
1. Frontend (React)
2. API (Node) - –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–æ—Å—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç.–¥.)
3. API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (Node) - –≤—Å–µ —á—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–ª–∞—Ç–µ–∂–µ–π
4. API –ë–î (Mongo)
5. API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ë–î (Mongo)
6. Nginx (proxy) - –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –≤ –∫–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏


## 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker
2. `docker --version` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Docker
3. `docker-compose --version` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Docker Compose
4. –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NodeJS –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
5. `node -v` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏


## 4. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤)
1. **GIT**
  * `git init` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Git –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –∏ —Å–æ–∑–¥–∞—Ç—å `.gitignore`
  * `git status` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
2. **–°–æ–∑–¥–∞–Ω–∏–µ API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
  * `mkdir api` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ `api`
  * `cd api` - –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É `api`
    * `cd ..` - –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥ (–ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ –ø–æ –¥–µ—Ä–µ–≤—É –ø–∞–ø–æ–∫)
    * `cd f:\/docker\/docker-app` - –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É
  * `npm init` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `package.json`
  * —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  * –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ë–î
3. **–°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
  * —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É `api` –∏ –Ω–∞–∑–≤–∞—Ç—å –µ–µ `auth`
  * –æ—á–∏—Å—Ç–∏—Ç—å –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∏ –ª–∏—à–Ω–µ–≥–æ –∫–æ–¥–∞
  * –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ë–î
4. **–°–µ—Ä–≤–∏—Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞**
  * `npm init react-app frontend` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  * `cd frontend` - –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É frontend
  * `npm run start` - –∑–∞–ø—É—Å—Ç–∏—Ç—å
  * –°–æ–∑–¥–∞—Ç—å `Dockerfile`
  * –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ Windows: Create-React-App –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö —Å Windows. –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ, —Å–¥–µ–ª–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:
    * –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ –ø—Ä–æ–µ–∫—Ç–∞ `frontend` —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `.env`
    * –¥–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ: `CHOKIDAR_USEPOLLING=true`
    * –í–æ—Ç –∏ –≤—Å–µ!
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx**
  * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
    * `%SystemRoot%/system32/drivers/etc` - –æ—Ç–∫—Ä—ã—Ç—å host win10
    * –¥–æ–±–∞–≤–∏—Ç—å –≤ host —Å—Ç—Ä–æ–∫–∏
      * `127.0.0.1 docker-app.com` - production mode
      * `127.0.0.1 docker-app.local` - development mode


## 5. –ó–∞–ø—É—Å–∫
1. –ó–∞–ø—É—Å–∫ Docker Compose
   * `docker-compose build` - —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
   * `docker-compose up` - –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
2. Production mode
   * `docker-compose up --build`
   * `docker-compose up --build -d` - –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ñ–æ–Ω–µ (–±–µ–∑ –ª–æ–≥–æ–≤)
2. Development mode
   * `docker-compose -f docker-compose.yml -f docker-compose.development.yml up --build`
   * `docker-compose -f docker-compose.yml -f docker-compose.development.yml up --build -d` - –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ñ–æ–Ω–µ (–±–µ–∑ –ª–æ–≥–æ–≤)


---


### –ö–æ–º–∞–Ω–¥—ã
  * `docker image prune -a` - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤, –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
  * `docker system prune` - –£–¥–∞–ª–∏—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏, –∏–º–∞–¥–∂–∏, –∫–µ—à
  * `docker volume prune` - –£–¥–∞–ª–∏—Ç –≤—Å–µ volume
  * `docker image prune`
  * `for /F %i in ('docker images -a -q') do docker rmi -f %i` - –£–¥–∞–ª–∏—Ç –≤—Å–µ images (windows)

#### Run
  * `docker run image_name:tag` - –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  * –ü–æ–ª–µ–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∫–æ–º–∞–Ω–¥—ã run:
    * `-d` - –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ñ–æ–Ω–µ
    * `-rm` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
    * `-p` - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ –≤ –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    * `-e` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
    * `-v` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–æ–ª—å—é–º–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    * `-ti` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —à–µ–ª–∞)

#### List
  * `docker ps` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  * `docker ps -a` - –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  * `docker images` - –í—Å–µ –æ–±—Ä–∞–∑—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### Docker-compose
  * `docker-compose up -d` - –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å docker-compose.yml —Ñ–∞–π–ª–æ–º
  * `docker-compose down` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞


---


### –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø–∞–∫–µ—Ç—ã
  * `npm update --save`
    –∏–ª–∏
  * `npm install npm-check-updates -g --save-dev` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
    * `ncu` - –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ
    * `ncu -u` - –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª –ø–∞–∫–µ—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞
    * `ncu -g` - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã


---


### –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∏ `node_modules` —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ Windows
  * `npm install rimraf -g`
  * `rimraf node_modules`